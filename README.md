[Japanese](./README.md) / [English](./readme_en.md)

ツール : <a href="https://tomoya-onuki.github.io/CVViewer/" target="_blank">https://tomoya-onuki.github.io/CVViewer/</a>

# CVViewer
作成 : 2022.08.09  
更新 : 2022.08.23  
小貫智弥  

- [CVViewer](#cvviewer)
  - [CVViewerとは](#cvviewerとは)
  - [簡単な使い方](#簡単な使い方)
    - [1. データの読み込み](#1-データの読み込み)
    - [2. データの平均化](#2-データの平均化)
    - [3. データセットの確認とグラフの編集](#3-データセットの確認とグラフの編集)
    - [4. グラフのデザイン](#4-グラフのデザイン)
    - [5. グラフを保存](#5-グラフを保存)
    - [6. グラフの再現・再編集](#6-グラフの再現再編集)
  - [ファイルの読み込み](#ファイルの読み込み)
    - [1. ドロップ](#1-ドロップ)
    - [2. クリック](#2-クリック)
    - [3. ショートカット](#3-ショートカット)
  - [データの加工](#データの加工)
    - [1. データの平均化](#1-データの平均化)
    - [2. データセットのラベルの指定](#2-データセットのラベルの指定)
    - [3. データの検索](#3-データの検索)
    - [4. 一括選択](#4-一括選択)
  - [データセットの可視化](#データセットの可視化)
    - [1. 表示/非表示の切り替え](#1-表示非表示の切り替え)
    - [2. ラベルの変更](#2-ラベルの変更)
    - [3. 色の変更](#3-色の変更)
    - [4. 詳細の確認](#4-詳細の確認)
    - [5. 重ね順の変更](#5-重ね順の変更)
  - [グラフのデザイン](#グラフのデザイン)
    - [1. 線のスタイル](#1-線のスタイル)
    - [2. グラフ全体のスタイル](#2-グラフ全体のスタイル)
  - [ラベルの編集](#ラベルの編集)
    - [1. テキストの編集](#1-テキストの編集)
    - [2. 凡例](#2-凡例)
    - [3. フォントの指定](#3-フォントの指定)
    - [4. 位置](#4-位置)
  - [軸の編集](#軸の編集)
    - [1. 軸の範囲](#1-軸の範囲)
    - [2. フォーマット](#2-フォーマット)
    - [3. 目盛り](#3-目盛り)
  - [グラフのダウンロード](#グラフのダウンロード)
    - [1. 画像データ(PNG形式)](#1-画像データpng形式)
    - [2. JSONデータ](#2-jsonデータ)
  - [ショートカットキー](#ショートカットキー)
  - [リリースノート](#リリースノート)
  - [参考文献](#参考文献)



## CVViewerとは
サイクリックボルタンメトリー (cyclic voltammetry, CV) という電気化学計測によって得られたデータを可視化するためのツールです。サイクリックボルタンメトリーとは応答電流を測定する手法であり、電気化学分野において最も基本的かつ多用される測定法です。

## 簡単な使い方
### 1. データの読み込み
1. 「ファイルタブ」上で、ファイルをドロップして読み込みます

   <img src="https://github.com/tomoya-onuki/cvviewer/blob/masterhttps://github.com/tomoya-onuki/cvviewer/blob/master/img/01.png" width="60%">  

### 2. データの平均化
1. 「データタブ」上で平均を出したいデータのチェックボックスをチェックします。
3. 平均化ボタンを押します。このときラベルを設定することもできます。

   <img src="https://github.com/tomoya-onuki/cvviewer/blob/masterhttps://github.com/tomoya-onuki/cvviewer/blob/master/img/02.png" width="60%">

1. グラフが表示されます

<br><br>

### 3. データセットの確認とグラフの編集
1. 「表示タブ」上で、平均化したデータセットを確認します。
2. このデータセットのラベルは1-3で指定したものと対応しています。指定しなかった場合は自動で名前がついています。テキストをクリックして編集できます。
3. テキストの左隣の黒い四角をクリックすると、グラフの色を設定できます
4. ▼ボタンを押すと、含まれているデータを確認できます
4. 線の太さや、自動配色機能による色付けなどを行います。
5. ピーク値やグリッドを必要に応じて表示/非表示します。

   <img src="https://github.com/tomoya-onuki/cvviewer/blob/masterhttps://github.com/tomoya-onuki/cvviewer/blob/master/img/03.png" width="60%"> 

   *グラフにはモザイク処理をしています
   
<br><br>

### 4. グラフのデザイン
1. 「編集タブ」で行います
2. タイトルと各軸のラベルを設定します
3. グラフ上のテキストをクリックし、スタイル（フォント、サイズなど）を設定します
4. グラフ上のテキストをクリックし、レイアウトボタンやマウス・キーボード操作によって位置を調整します
5. 各軸の範囲を指定します。固有の単位あるいはパーセンテージによる調整ができます
6. 目盛りの指数表示形式や、有効数字を設定します
7. 目盛りの幅を設定します
  
    <img src="https://github.com/tomoya-onuki/cvviewer/blob/masterhttps://github.com/tomoya-onuki/cvviewer/blob/master/img/04.png" width="60%">

<br><br>

### 5. グラフを保存
1. 「ファイルタブ」からグラフをダウンロードすることができます。
2. 画像で保存する場合はPNGを選択します。
3. 解像度を選択します。
4. ダウンロードボタンを押します。

<br><br>

### 6. グラフの再現・再編集
1. 「ファイルタブ」でjsonを選択し保存します。
2. 保存されたjsonファイル(.cvv.json)を「ファイルタブ」で読み込むとグラフが再現されます。

<br><br><br>

## ファイルの読み込み
読み込むことができるファイルは、測定データとこのツールで作成したJSONデータの2種類です。

サポートしている測定データは、ALS Electrochemical Analyzer Model 800D (BAS社製)によって測定し、書き出したテキストファイル(.txt)のみです。  
<br>

### 1. ドロップ
ファイルを画像の枠線内にドロップする。マウスを持っていくと、枠線が青くハイライトされるので、マウスを離すことでドロップが完了する。  
<br>

### 2. クリック
画像の枠線をクリックする。するとファイルセレクタが開くので、ファイルを選択する  
<br>

### 3. ショートカット
`alt+O`(win), `opt+shift+O`(max)でファイルセレクタが開くので、ファイルを選択する

![](https://github.com/tomoya-onuki/cvviewer/blob/masterhttps://github.com/tomoya-onuki/cvviewer/blob/master/img/file-load.png)


<br><br><br>

## データの加工
この機能では主にデータの平均化を行います。
また、平均化した時点でグラフが作成されます。

### 1. データの平均化
複数のデータを平均化したデータセットを作成する機能です。
平均化したいファイル名の左横のチェックボックスにチェックを入れて、`平均化`ボタンを押すと、平均化したデータセットが生成されます。

データセットは表示タブから確認できます。  
<br>

### 2. データセットのラベルの指定
Group Labelと書かれた枠内にラベル名を入力することで、平均化して作成されるデータセットのラベルを指定できます。  <br>

### 3. データの検索
検索窓にキーワードを入力すると、そのキーワードを含むファイルを検索することができます。

### 4. 一括選択
下部の`全選択`, `全解除`を押すと一括での選択・解除が可能です。データ検索機能と合わせて使うことで効率化が図れます。

![](https://github.com/tomoya-onuki/cvviewer/blob/masterhttps://github.com/tomoya-onuki/cvviewer/blob/master/img/data-select.png)

<br><br><br>


## データセットの可視化
データは平均化した時点でグラフが生成されます。

<br>

### 1. 表示/非表示の切り替え
ラベルの右横のチェックボックスのチェックを外すとグラフ上で非表示にできます。
下部の`全選択`, `全解除`を押すと一括で変更が可能です。

<br>

### 2. ラベルの変更
ラベル部分をクリックすると編集モードになります。名前を編集できます。

<br>
  
### 3. 色の変更
ラベルの左横の黒い四角をクリックすると、カラーパレットが表示されます。色を指定するとグラフ上の色を変更できます。

<br>
  
### 4. 詳細の確認
`▼`ボタンをクリックするとデータセットに含まれるファイルを閲覧できます。

<br>
  
### 5. 重ね順の変更
グラフでの重ね順は、データセット一覧の上から順と同様です。`↓`,`↑`ボタンを押すことで順序を入れ替えることができます。また、下部の`↓↑`ボタンで順序を逆転することも可能です。

<br>
  
![](https://github.com/tomoya-onuki/cvviewer/blob/master/img/dataset-list.png)
<br><br><br>

## グラフのデザイン
### 1. 線のスタイル
- 線の太さを指定できます。
- また配色を選ぶと、自動的な配色を行います。
- 破線をONにすると、自動的に破線で分類を行います。
<br>

### 2. グラフ全体のスタイル
- 枠線の表示/非表示を切り替えることができます
- グリッドの表示/非表示を切り替えることができます
- サイズを指定できます。ただし、ウィンドウサイズより大きくすることは不可能です。
- `最適化`ボタンをクリックするとサイズを最適化します。縦長になることはありません。
- 余白を指定することができます。

![](https://github.com/tomoya-onuki/cvviewer/blob/master/img/line.png)
<br><br><br>

## ラベルの編集
### 1. テキストの編集
- タイトル、横軸、縦軸のラベルの内容を指定できます
- 表示/非表示を指定できます。

### 2. 凡例
- 凡例の表示/非表示を指定できます。
- 最大,最小の表示/非表示を指定できます。

### 3. フォントの指定
- グラフ上で編集したいラベルをクリックすると青い枠線が表示されます。この状態で編集タブからラベルのスタイルを編集できます。
- フォント、サイズ、ボールド、イタリックを設定できます。

![](https://github.com/tomoya-onuki/cvviewer/blob/master/img/label.png)

### 4. 位置
- ラベルを選択した状態で、マウスドラッグをするとラベルを移動できます。
- ラベルを選択した状態で、矢印キーを押すとラベルを移動できます。
- レイアウトボタンを押すと位置を合わせることができます。

![](https://github.com/tomoya-onuki/cvviewer/blob/master/img/text.png)
<br><br><br>

## 軸の編集
### 1. 軸の範囲
- 軸の範囲を指定できます。
- 単位モードとパーセンテージモードがあります。
- パーセンテージモードでは、初期の表示幅を100%とした時の割合で指定することができます。

### 2. フォーマット
- 指数表示を指定できます
- 小数点以下の有効桁数を指定できます

### 3. 目盛り
- 目盛り幅を指定できます。0を基準に設定されます。
- 目盛りの方向(内/外) と表示/非表示を指定できます。

![](https://github.com/tomoya-onuki/cvviewer/blob/master/img/axis.png)
<br><br><br>

## グラフのダウンロード
2種類の形式でグラフを保存できます。

### 1. 画像データ(PNG形式)
- png形式で保存します。
- 図表として使うのに適しています。
- 再編集はできません。
- 解像度を指定できます。推奨は中です。

### 2. JSONデータ
- 再編集するためのフォーマットです。
- このツールに読み込むことでグラフを再現できます。また再編集も可能です。
- 図表として使うことはできません。
- 画像に変換するためには、このツールで一度読み込んだのちにpng形式でダウンロードします。

![](https://github.com/tomoya-onuki/cvviewer/blob/master/img/file-load.png)
<br><br><br>

## ショートカットキー
| 操作 | windows | mac |
| :--- | :--- | :--- |
| ファイルの読み込み | Alt + o | Option + o |
| 画像保存 | Alt + Shift + s | Option + Shift + s |
| json保存 | Alt + s | Option + s |
| タブ移動 | Alt + ←,→ | Option + ←,→ |
|  | Alt + 1 ~ 4 | Option + 1 ~ 4 |
| サイズの最適化 | Alt + 0 | Option + 0 |
| 拡大 | Alt + + | Option + + |
| 縮小 | Alt + - | Option + - |
| グリッド | Alt + g | Option + g |
| 最大値 | Alt + m | Option + m |
| 最小値 | Alt + n | Option + n |
| 凡例 | Alt + l | Option + l |
| 枠線 | Alt + f | Option + f |

<br><br><br>

## リリースノート
- ver3.3 (2022/ 8/22) 
  - 軸の目盛りのデザインを変更できる
  - 目盛りの幅を変更できる
  - 余白を編集できる
- ver3.0 (2022/ 8/18) 
  - テキストのスタイルを編集できる
  - ラベルを移動できる
- ver2.1 (2022/ 8/16) 
  - ショートカットをつかえる
- ver2.0 (2022/ 8/16) 
  - 軸の指数表記と有効数字を設定できる
  - JSONファイルでの書き出したファイルを読み込むことで再編集できる
  - グラフの周囲の囲みを表示できる
  - 最大値と最小値の表示/非表示を独立に選択できる
  - ファイルを読み込むと自動的にデータタブへ移動する
- ver1.1 (2022/ 8/10) グラフの重ね順を変えることができる
- ver1.0 (2022/ 8/ 9) 基本機能

<br><br><br>

## 参考文献
1. https://ja.wikipedia.org/wiki/%E3%82%B5%E3%82%A4%E3%82%AF%E3%83%AA%E3%83%83%E3%82%AF%E3%83%9C%E3%83%AB%E3%82%BF%E3%83%B3%E3%83%A1%E3%83%88%E3%83%AA%E3%83%BC